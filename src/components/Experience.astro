---
import type { TExperience } from '@/types';

import Img from './Img.astro';

interface Props {
	experience: TExperience;
}

const {
	experience: { position, firm, description, date, projects }
} = Astro.props as Props;
---

<div
	class="relative rounded-2xl border border-border bg-primary-foreground px-5 py-3 text-muted-foreground"
>
	{
		!!firm.logo && (
			<Img
				src={firm.logo}
				alt={firm.alt}
				class="mb-3 h-12 w-auto md:absolute md:-left-16 md:mb-0"
			/>
		)
	}
	<div class="flex flex-col gap-y-1.5">
		<div class="flex flex-col gap-y-0.5">
			<h1 class="flex flex-col text-lg font-medium text-foreground lg:flex-row lg:space-x-0.5">
				<span>{position}</span>
				<span
					>@<a href={firm.link} target="_blank" class="hover:underline hover:underline-offset-4"
						>{firm.name}</a
					></span
				>
			</h1>
			<date>{date}</date>
			<p>{description}</p>
			{
				projects.length > 0 && (
					<ul class="mt-1 space-y-2">
						{projects.map((project) => (
							<li class="rounded-2xl border p-3">
								<a
									href={project.href}
									class="text-md font-semibold hover:underline hover:underline-offset-2"
								>
									{project.name}
								</a>
								<ul class="ml-6 list-disc text-sm text-muted-foreground">
									{project.items.map((item) => (
										<li>
											{item.label && <span class="font-medium">{item.label}:</span>} {item.value}
										</li>
									))}
								</ul>
							</li>
						))}
					</ul>
				)
			}
		</div>
	</div>
</div>
