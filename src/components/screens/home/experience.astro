---
import { SeeMore } from "./see-more";
import { Code2 } from "lucide-react";

import Box from "@/components/ui/box-index.astro";
import BoxHeader from "@/components/ui/box-header.astro";
import BoxTitle from "@/components/ui/box-title.astro";
import BoxContent from "@/components/ui/box-content.astro";

type TExperience = {
    company: string;
    positions: {
        title: string;
        year: string;
        description: string[];
        skills: string[];
    }[];
};

const experiences: TExperience[] = [
    {
        company: "Finnext",
        positions: [
            {
                title: "Full-stack Developer",
                year: "May 2023 – Present",
                description: [
                    "Developed a **SaaS application** for [PaystubHero](https://paystubhero.com) that generates **3,000+ financial documents monthly**",
                    "Built a **SaaS application** for [QuickDoctorsNote](https://quickdoctorsnote.com)",
                    "Maintained application servers with continuous **bug fixes** and **feature updates**",
                    "Created and maintained custom **WordPress plugins** and websites",
                ],
                skills: [
                    "PHP",
                    "TypeScript",
                    "Laravel",
                    "WordPress",
                    "React",
                    "Inertia.js",
                    "TailwindCSS",
                    "shadcn/ui",
                    "MySQL",
                    "Redis",
                ],
            },
        ],
    },
    {
        company: "Systech Digital LTD",
        positions: [
            {
                title: "Software Engineer Intern",
                year: "Jun 2024 – Sep 2024",
                description: [
                    "Developed a **Laravel-based e-commerce platform** with an **admin panel**",
                    "Built a **custom web application** using PHP with a Laravel-inspired architecture",
                    "Collaborated with senior developers to implement **industry best practices**  ",
                ],
                skills: ["PHP", "Laravel", "TailwindCSS", "MySQL"],
            },
        ],
    },
];
---

<Box>
    <BoxHeader>
        <BoxTitle>Experience</BoxTitle>
    </BoxHeader>
    <BoxContent className="px-0">
        {
            experiences.map((e, index) => (
                <div class="space-y-4 p-4 not-last:border-b">
                    <div class="flex items-center space-x-4 px-2">
                        <span class="size-2 rounded-full bg-foreground/60" />

                        <h3 class="text-xl font-black">{e.company}</h3>
                    </div>

                    <div class="relative space-y-4 pl-1 before:absolute before:left-3 before:h-full before:w-px before:bg-border">
                        {e.positions.map(position => (
                            <div>
                                <div class="block w-full text-left">
                                    <div class="relative z-1 mb-1 flex items-center space-x-3">
                                        <Code2 className="size-4 bg-background" />
                                        <h3 class="text-base font-black underline-offset-4">
                                            {position.title}
                                        </h3>
                                    </div>
                                    <span class="flex items-center gap-2 pl-7 font-mono text-sm text-foreground">
                                        {position.year}
                                    </span>
                                </div>
                                <SeeMore
                                    open={index === 0}
                                    items={position.description}
                                    skills={position.skills}
                                    client:load
                                />
                            </div>
                        ))}
                    </div>
                </div>
            ))
        }
    </BoxContent>
</Box>
