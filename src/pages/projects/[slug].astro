---
import type { GetStaticPaths, InferGetStaticPropsType } from 'astro';

import Layout from '@/components/Layout.astro';
import Project from '@/components/screens/projects/Project';

import { allProjects } from '@/utils/projects';
import { suffixTitle } from '@/config/site';

export const getStaticPaths = (async () => {
	return (await allProjects()).map((entry) => ({
		params: { slug: entry.slug },
		props: { entry }
	}));
}) satisfies GetStaticPaths;

export type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { entry: project } = Astro.props as Props;

const { Content } = await project.render();
---

<Layout
	meta={{
		title: suffixTitle(project.data.title),
		description: project.data.description,
		ogImage: project.data.ogimage ?? `/og-image/${project.slug}.png`
	}}
>
	<Project project={project}>
		<Content />
	</Project>
</Layout>
