---
import { getCollection } from "astro:content";

import Pattern from "@/components/ui/pattern.astro";
import Box from "@/components/ui/box-index.astro";
import BoxHeader from "@/components/ui/box-header.astro";
import BoxTitle from "@/components/ui/box-title.astro";

import PageLayout from "@/components/layouts/page/layout.astro";

import ProjectItem from "@/components/screens/projects/project-item.astro";

const projects = await getCollection("projects");

const coreProjects = projects.filter(project => project.data.type === "core");
const sideProjects = projects.filter(project => project.data.type === "side");
---

<PageLayout
    description="A collection of things Iâ€™ve built, full-stack apps, experiments, and side projects."
    title="My Projects"
>
    <Pattern />
    <Box>
        <BoxHeader>
            <BoxTitle> Built to Last </BoxTitle>
        </BoxHeader>

        {coreProjects.map(item => <ProjectItem project={item} />)}
    </Box>
    {
        sideProjects.length > 0 && (
            <>
                <Pattern />
                <Box>
                    <BoxHeader>
                        <BoxTitle>Side Hustles</BoxTitle>
                    </BoxHeader>
                    {sideProjects.map(item => (
                        <ProjectItem project={item} />
                    ))}
                </Box>
            </>
        )
    }
    <Pattern />
</PageLayout>
