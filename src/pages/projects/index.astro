---
import { siteConfig } from '@/site.config';
import { allProjects } from '@/utils/projects';

import Back from '@/components/Back';
import Layout from '@/components/Layout.astro';
import Project from '@/components/Project.astro';

const projects = await allProjects();
---

<Layout
	meta={{
		title: `Projects by ${siteConfig.author}`,
		description: "List of all projects I've did or doing"
	}}
>
	<div class="w-full px-4 lg:px-6">
		<Back href="/" client:load class="mb-8" />

		<div class="flex flex-col items-center">
			<h1 class="mb-8 mt-6 text-3xl font-bold">Client's Projects</h1>

			{projects.length === 0 && <p class="text-lg text-muted-foreground">No projects yet.</p>}

			{
				projects.length > 0 && (
					<div class="flex w-full flex-col gap-x-8 gap-y-16 lg:w-3/4 lg:px-4">
						<section aria-label="Blog posts list" class="w-full">
							<ul class="flex flex-col gap-y-8 text-start">
								{projects.map((p) => (
									<li class="w-full">
										<Project project={p} loading={'eager'} />
									</li>
								))}
							</ul>
						</section>
					</div>
				)
			}
		</div>
	</div>
</Layout>
